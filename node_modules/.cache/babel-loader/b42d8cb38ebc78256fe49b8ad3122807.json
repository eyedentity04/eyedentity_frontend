{"ast":null,"code":"var _jsxFileName = \"/home/lenovo-linux/Desktop/glints/project/final-project/eyedentity_frontend/src/components/Homepage/Add.js\";\nimport React, { useState, useEffect, createRef } from \"react\";\nimport { Formik } from \"formik\";\nimport { connect } from \"react-redux\";\nimport { add, saveHide } from \"../../actioncreators/Home\";\nimport { Form } from \"react-bootstrap\";\nimport Geocode from \"react-geocode\";\nimport axios from \"axios\";\nimport \"./Add.css\";\nimport \"./tag.css\";\nimport { ModalTitle, ModalBody, ModalFooter, Modal, Button } from \"react-bootstrap\";\n\nfunction Add(props) {\n  const Url = process.env.REACT_APP_API_URL;\n  const key = process.env.REACT_APP_API_KEY;\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const id = user.id;\n  const [data, setData] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [tag, setTag] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [hideModal, sethideModal] = useState(true);\n  const [url, setUrl] = useState(\"https://api.riyofirsan.com/users/findQuery?name=!@#$%^$\");\n  const innerRef = createRef(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(url);\n      setTags(result.data);\n    };\n\n    fetchData();\n  }, [url]);\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      console.log(position.coords.latitude);\n      console.log(position.coords.longitude);\n      Geocode.setApiKey(`${key}`);\n      Geocode.fromLatLng(position.coords.latitude, position.coords.longitude).then(response => {\n        console.log(response.results[0].address_components[4].long_name);\n        setData({\n          lat: response.results[3].geometry.location.lat,\n          lng: response.results[3].geometry.location.lng,\n          city: response.results[0].formatted_address\n        });\n      });\n    });\n  }, []);\n  let city = data.city;\n  let lng = data.lng;\n  let lath = data.lat;\n  useEffect(() => {\n    innerRef.current && innerRef.current.focus();\n  }, [innerRef]);\n\n  const removeTags = index => {\n    setTag([...tag.filter(tags => tag.indexOf(tags) !== index)]);\n  };\n\n  const searchTags = async query => {\n    if (query === \"\") {\n      query = \"!@#$@@\";\n    }\n\n    const result = await axios(`https://api.riyofirsan.com/users/findQuery?name=${query}`);\n    setTags(result.data);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, Object.assign({}, props, {\n    size: \"md\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    id: \"contained-modal-title-vcenter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Post Here\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      name: id,\n      description: \"\",\n      image: null,\n      namePlace: city,\n      long: lng,\n      lat: lath,\n      tag: \"\"\n    },\n    onSubmit: (values, action) => {\n      let formData = new FormData();\n      formData.set(\"name\", values.name);\n      formData.set(\"description\", values.description);\n      formData.set(\"namePlace\", city);\n      formData.set(\"long\", lng);\n      formData.set(\"lat\", lath);\n      formData.append(\"image\", values.image);\n      tag.forEach(item => {\n        formData.append(\"tag\", item._id);\n      });\n      props.add(formData);\n      action.resetForm();\n      props.onHide(false);\n      setTag([]);\n      setTags([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, props => /*#__PURE__*/React.createElement(Form, {\n    onSubmit: props.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"tags\",\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, tag.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: \"tag test\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-close-icon\",\n    onClick: () => removeTags(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, \"x\"))))), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control \",\n    id: \"description\",\n    name: \"description\",\n    rows: 6,\n    style: {\n      resize: \"none\"\n    },\n    value: props.values.description,\n    placeholder: \"Type something....\",\n    onChange: props.handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    value: props.namePlace,\n    onChange: props.handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Tag Your Friends Here\",\n    value: query,\n    onChange: event => setQuery(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn text-light\",\n    onClick: () => searchTags(query),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 19\n    }\n  }, \"Search\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, tags.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: \"tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-custom\",\n    type: \"button\",\n    onClick: e => setTag([...tag, item]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 27\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-close-icon\",\n    onClick: () => removeTags(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, \"x\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-btn-wrapper mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"custom-btn \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }, \"Upload a file\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control \",\n    id: \"image\",\n    name: \"image\",\n    onChange: event => {\n      props.setFieldValue(\"image\", event.currentTarget.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn text-light btn-block\",\n    onSubmit: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, \"Submit\")))));\n}\n\nconst mapDispatchToProps = {\n  add: add\n};\nexport default connect(null, mapDispatchToProps)(Add);","map":{"version":3,"sources":["/home/lenovo-linux/Desktop/glints/project/final-project/eyedentity_frontend/src/components/Homepage/Add.js"],"names":["React","useState","useEffect","createRef","Formik","connect","add","saveHide","Form","Geocode","axios","ModalTitle","ModalBody","ModalFooter","Modal","Button","Add","props","Url","process","env","REACT_APP_API_URL","key","REACT_APP_API_KEY","user","JSON","parse","localStorage","getItem","id","data","setData","tags","setTags","query","setQuery","tag","setTag","showModal","setShowModal","hideModal","sethideModal","url","setUrl","innerRef","fetchData","result","navigator","geolocation","getCurrentPosition","position","console","log","coords","latitude","longitude","setApiKey","fromLatLng","then","response","results","address_components","long_name","lat","geometry","location","lng","city","formatted_address","lath","current","focus","removeTags","index","filter","indexOf","searchTags","name","description","image","namePlace","long","values","action","formData","FormData","set","append","forEach","item","_id","resetForm","onHide","handleSubmit","cursor","map","resize","handleChange","event","target","value","e","setFieldValue","currentTarget","files","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createRef } from \"react\";\nimport { Formik } from \"formik\";\nimport { connect } from \"react-redux\";\nimport { add, saveHide } from \"../../actioncreators/Home\";\nimport { Form } from \"react-bootstrap\";\nimport Geocode from \"react-geocode\";\nimport axios from \"axios\";\nimport \"./Add.css\";\nimport \"./tag.css\";\nimport {\n  ModalTitle,\n  ModalBody,\n  ModalFooter,\n  Modal,\n  Button,\n} from \"react-bootstrap\";\n\nfunction Add(props) {\n  const Url = process.env.REACT_APP_API_URL;\n  const key = process.env.REACT_APP_API_KEY;\n\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const id = user.id;\n\n  const [data, setData] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [query, setQuery] = useState(\"\");\n\n  const [tag, setTag] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [hideModal, sethideModal] = useState(true);\n\n  const [url, setUrl] = useState(\n    \"https://api.riyofirsan.com/users/findQuery?name=!@#$%^$\"\n  );\n\n  const innerRef = createRef(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(url);\n\n      setTags(result.data);\n    };\n\n    fetchData();\n  }, [url]);\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      console.log(position.coords.latitude);\n      console.log(position.coords.longitude);\n      Geocode.setApiKey(`${key}`);\n      Geocode.fromLatLng(\n        position.coords.latitude,\n        position.coords.longitude\n      ).then((response) => {\n        console.log(response.results[0].address_components[4].long_name);\n        setData({\n          lat: response.results[3].geometry.location.lat,\n          lng: response.results[3].geometry.location.lng,\n          city: response.results[0].formatted_address,\n        });\n      });\n    });\n  }, []);\n\n  let city = data.city;\n  let lng = data.lng;\n  let lath = data.lat;\n\n  useEffect(() => {\n    innerRef.current && innerRef.current.focus()\n  },[innerRef]);\n\n  const removeTags = (index) => {\n    setTag([...tag.filter((tags) => tag.indexOf(tags) !== index)]);\n  };\n\n  const searchTags = async (query) => {\n    if (query === \"\") {\n      query = \"!@#$@@\";\n    }\n    const result = await axios(\n      `https://api.riyofirsan.com/users/findQuery?name=${query}`\n    );\n    setTags(result.data);\n  };\n\n  return (\n    <Modal\n      {...props}\n      size=\"md\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">Post Here</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Formik\n          initialValues={{\n            name: id,\n            description: \"\",\n            image: null,\n            namePlace: city,\n            long: lng,\n            lat: lath,\n            tag: \"\",\n          }}\n          onSubmit={(values, action) => {\n            let formData = new FormData();\n            formData.set(\"name\", values.name);\n            formData.set(\"description\", values.description);\n            formData.set(\"namePlace\", city);\n            formData.set(\"long\", lng);\n            formData.set(\"lat\", lath);\n            formData.append(\"image\", values.image);\n            tag.forEach((item) => {\n              formData.append(\"tag\", item._id);\n            });\n            props.add(formData);\n            action.resetForm();\n            props.onHide(false);\n            setTag([]);\n            setTags([]);\n          }}\n        >\n          {(props) => (\n            <Form onSubmit={props.handleSubmit}>\n              <div className=\"form-group mt-4\">\n                <div className=\"tags-input\">\n                  <ul\n                    id=\"tags\"\n                    style={{\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    {tag.map((item, index) => (\n                      <li key={index} className=\"tag test\">\n                        <span className=\"tag-title\">{item.name}</span>\n                        <span\n                          className=\"tag-close-icon\"\n                          onClick={() => removeTags(index)}\n                        >\n                          x\n                        </span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                <textarea\n                  className=\"form-control \"\n                  id=\"description\"\n                  name=\"description\"\n                  rows={6}\n                  style={{\n                    resize: \"none\",\n                  }}\n                  value={props.values.description}\n                  placeholder=\"Type something....\"\n                  onChange={props.handleChange}\n                />\n                <div value={props.namePlace} onChange={props.handleChange} />\n\n                <div className=\"input-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Tag Your Friends Here\"\n                    value={query}\n                    onChange={(event) => setQuery(event.target.value)}\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"btn text-light\"\n                    onClick={() => searchTags(query)}\n                  >\n                    Search\n                  </button>\n                </div>\n\n                <div className=\"tags-input\">\n                  <ul id=\"tags\">\n                    {tags.map((item, index) => (\n                      <li key={index} className=\"tag\">\n                        <button\n                          className=\"btn-custom\"\n                          type=\"button\"\n                          onClick={(e) => setTag([...tag, item])}\n                        >\n                          <span className=\"tag-title\">{item.name}</span>\n                        </button>\n\n                        <span\n                          className=\"tag-close-icon\"\n                          onClick={() => removeTags(index)}\n                        >\n                          x\n                        </span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                <div className=\"upload-btn-wrapper mt-2\">\n                  <button type=\"submit\" className=\"custom-btn \">\n                    Upload a file\n                  </button>\n\n                  <input\n                    type=\"file\"\n                    className=\"form-control \"\n                    id=\"image\"\n                    name=\"image\"\n                    onChange={(event) => {\n                      props.setFieldValue(\n                        \"image\",\n                        event.currentTarget.files[0]\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                className=\"btn text-light btn-block\"\n                onSubmit={hideModal}\n              >\n                Submit\n              </button>\n            </Form>\n          )}\n        </Formik>\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nconst mapDispatchToProps = {\n  add: add,\n};\n\nexport default connect(null, mapDispatchToProps)(Add);\n"]},"metadata":{},"sourceType":"module"}