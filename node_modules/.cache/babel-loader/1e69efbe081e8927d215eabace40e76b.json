{"ast":null,"code":"import React from 'react';\nimport PropTypes from 'prop-types';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Geolocation = function (_React$Component) {\n  _inherits(Geolocation, _React$Component);\n\n  function Geolocation(props) {\n    _classCallCheck(this, Geolocation);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.getCurrentPosition = function () {\n      var _this$props = _this.props,\n          enableHighAccuracy = _this$props.enableHighAccuracy,\n          timeout = _this$props.timeout,\n          maximumAge = _this$props.maximumAge,\n          onSuccess = _this$props.onSuccess,\n          onError = _this$props.onError;\n\n      _this.setState({\n        fetchingPosition: true\n      });\n\n      return window.navigator.geolocation.getCurrentPosition(function (position) {\n        if (_this.willUnmount) return;\n\n        _this.setState({\n          position: position,\n          fetchingPosition: false\n        }, function () {\n          return onSuccess(position);\n        });\n      }, function (error) {\n        if (_this.willUnmount) return;\n\n        _this.setState({\n          error: error,\n          fetchingPosition: false\n        }, function () {\n          return onError(error);\n        });\n      }, {\n        enableHighAccuracy: enableHighAccuracy,\n        timeout: timeout,\n        maximumAge: maximumAge\n      });\n    };\n\n    _this.state = {\n      fetchingPosition: false,\n      position: undefined,\n      error: undefined\n    };\n    return _this;\n  }\n\n  Geolocation.prototype.componentWillMount = function componentWillMount() {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object') {\n      return;\n    }\n\n    if (!('geolocation' in window.navigator)) {\n      return;\n    }\n\n    if (this.props.lazy) {\n      return;\n    }\n\n    this.getCurrentPosition();\n  };\n\n  Geolocation.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.willUnmount = true;\n  };\n\n  Geolocation.prototype.render = function render() {\n    if (!this.props.render) {\n      return null;\n    }\n\n    return this.props.render({\n      getCurrentPosition: this.getCurrentPosition,\n      fetchingPosition: this.state.fetchingPosition,\n      position: this.state.position,\n      error: this.state.error\n    }) || null;\n  };\n\n  return Geolocation;\n}(React.Component);\n\nGeolocation.propTypes = {\n  // https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions\n  enableHighAccuracy: PropTypes.bool,\n  timeout: PropTypes.number,\n  maximumAge: PropTypes.number,\n  // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition\n  onSuccess: PropTypes.func,\n  onError: PropTypes.func,\n  // Do not call getCurrentPosition on mount\n  lazy: PropTypes.bool\n};\nGeolocation.defaultProps = {\n  enableHighAccuracy: false,\n  timeout: Infinity,\n  maximumAge: 0,\n  onSuccess: function onSuccess(pos) {},\n  // eslint-disable-next-line handle-callback-err\n  onError: function onError(err) {},\n  lazy: false\n};\nexport default Geolocation;","map":{"version":3,"sources":["../src/index.js"],"names":["Geolocation","React","Component","undefined","componentWillMount","window","componentWillUnmount","enableHighAccuracy","timeout","maximumAge","onSuccess","onError","fetchingPosition","position","error","render","PropTypes","bool"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAGqBA,WAAAA,GAAAA,UAAAA,gBAAAA,EAAAA;;;uBACnB,K,EAAoB;;;iDAClB,gBAAA,CAAA,IAAA,CAAA,IAAA,EADkB,KAClB,C;;UADkB,kB,GA8BC,YAAM;wBAOrB,KAAA,CAPqB,K;UAEvBO,kBAFuB,GAAA,WAAA,CAAA,kB;UAGvBC,OAHuB,GAAA,WAAA,CAAA,O;UAIvBC,UAJuB,GAAA,WAAA,CAAA,U;UAKvBC,SALuB,GAAA,WAAA,CAAA,S;UAMvBC,OANuB,GAAA,WAAA,CAAA,O;;YASzB,Q,CAAc;AAAEC,QAAAA,gBAAAA,EAAhB;AAAc,O;;aAEP,MAAA,CAAA,SAAA,CAAA,WAAA,CAAA,kBAAA,CACL,UAAA,QAAA,EAAY;YACN,KAAA,CAAJ,W,EAAsB;;cAEtB,Q,CAAc;AAAEC,UAAAA,QAAAA,EAAF,QAAA;AAAYD,UAAAA,gBAAAA,EAA1B;AAAc,S,EAAuC,YAAA;iBACnDF,SAAAA,CADmD,QACnDA,C;AADF,S;AAJG,OAAA,EAQL,UAAA,KAAA,EAAS;YACH,KAAA,CAAJ,W,EAAsB;;cAEtB,Q,CAAc;AAAEI,UAAAA,KAAAA,EAAF,KAAA;AAASF,UAAAA,gBAAAA,EAAvB;AAAc,S,EAAoC,YAAA;iBAAMD,OAAAA,CAAN,KAAMA,C;AAAxD,S;AAXG,OAAA,EAaL;AAAEJ,QAAAA,kBAAAA,EAAF,kBAAA;AAAsBC,QAAAA,OAAAA,EAAtB,OAAA;AAA+BC,QAAAA,UAAAA,EAbjC;AAaE,OAbK,C;AAzCW,K;;UAGlB,K,GAAa;wBAAA,KAAA;gBAAA,SAAA;aAGJN;AAHI,K;;;;wBAOfC,kB,GAAAA,SAAAA,kBAAAA,GAAsB;QAChB,CAAA,OAAA,MAAA,KAAA,WAAA,GAAA,WAAA,GAAA,OAAA,CAAA,MAAA,CAAA,MAAJ,Q,EAAgC;;;;QAI5B,EAAE,iBAAiBC,MAAAA,CAAvB,SAAI,C,EAAsC;;;;QAItC,KAAA,KAAA,CAAJ,I,EAAqB;;;;SAIrB,kB;;;wBAGFC,oB,GAAAA,SAAAA,oBAAAA,GAAwB;SACtB,W,GAAA,I;;;wBA+BFS,M,GAAAA,SAAAA,MAAAA,GAAU;QACJ,CAAC,KAAA,KAAA,CAAL,M,EAAwB;aACtB,I;;;WAGA,KAAA,KAAA,CAAA,MAAA,CAAkB;0BACI,KADJ,kBAAA;wBAEE,KAAA,KAAA,CAFF,gBAAA;gBAGN,KAAA,KAAA,CAHM,QAAA;aAIT,KAAA,KAAA,CAAWD;AAJF,KAAlB,KADF,I;;;;CA/DiBd,CAAoBC,KAAAA,CAAMC,SAA1BF,CAHrB;;AA6EAA,WAAAA,CAAAA,SAAAA,GAAwB;;sBAEFgB,SAAAA,CAFE,IAAA;WAGbA,SAAAA,CAHa,MAAA;cAIVA,SAAAA,CAJU,MAAA;;aAMXA,SAAAA,CANW,IAAA;WAObA,SAAAA,CAPa,IAAA;;QAShBA,SAAAA,CAAUC;AATM,CAAxBjB;AAYAA,WAAAA,CAAAA,YAAAA,GAA2B;sBAAA,KAAA;WAAA,QAAA;cAAA,CAAA;aAId,SAAA,SAAA,CAAA,GAAA,EAAO,CAJO,CAAA;;WAMhB,SAAA,OAAA,CAAA,GAAA,EAAO,CANS,CAAA;QAOnB;AAPmB,CAA3BA","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Geolocation extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      fetchingPosition: false,\n      position: undefined,\n      error: undefined\n    }\n  }\n\n  componentWillMount () {\n    if (typeof window !== 'object') {\n      return\n    }\n\n    if (!('geolocation' in window.navigator)) {\n      return\n    }\n\n    if (this.props.lazy) {\n      return\n    }\n\n    this.getCurrentPosition()\n  }\n\n  componentWillUnmount () {\n    this.willUnmount = true\n  }\n\n  getCurrentPosition = () => {\n    const {\n      enableHighAccuracy,\n      timeout,\n      maximumAge,\n      onSuccess,\n      onError\n    } = this.props\n\n    this.setState({ fetchingPosition: true })\n\n    return window.navigator.geolocation.getCurrentPosition(\n      position => {\n        if (this.willUnmount) return\n\n        this.setState({ position, fetchingPosition: false }, () =>\n          onSuccess(position)\n        )\n      },\n      error => {\n        if (this.willUnmount) return\n\n        this.setState({ error, fetchingPosition: false }, () => onError(error))\n      },\n      { enableHighAccuracy, timeout, maximumAge }\n    )\n  }\n\n  render () {\n    if (!this.props.render) {\n      return null\n    }\n    return (\n      this.props.render({\n        getCurrentPosition: this.getCurrentPosition,\n        fetchingPosition: this.state.fetchingPosition,\n        position: this.state.position,\n        error: this.state.error\n      }) || null\n    )\n  }\n}\n\nGeolocation.propTypes = {\n  // https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions\n  enableHighAccuracy: PropTypes.bool,\n  timeout: PropTypes.number,\n  maximumAge: PropTypes.number,\n  // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition\n  onSuccess: PropTypes.func,\n  onError: PropTypes.func,\n  // Do not call getCurrentPosition on mount\n  lazy: PropTypes.bool\n}\n\nGeolocation.defaultProps = {\n  enableHighAccuracy: false,\n  timeout: Infinity,\n  maximumAge: 0,\n  onSuccess: pos => {},\n  // eslint-disable-next-line handle-callback-err\n  onError: err => {},\n  lazy: false\n}\n"]},"metadata":{},"sourceType":"module"}