{"ast":null,"code":"var _jsxFileName = \"/home/lenovo-linux/Desktop/glints/project/final-project/eyedentity_frontend/src/components/Homepage/Add.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Formik } from \"formik\";\nimport { connect } from \"react-redux\";\nimport { add } from \"../../actioncreators/Home\";\nimport { Form } from \"react-bootstrap\";\nimport Geocode from \"react-geocode\";\nimport axios from \"axios\";\nimport \"./Add.css\";\nimport \"./tag.css\";\n\nconst Add = props => {\n  const Url = process.env.REACT_APP_API_URL;\n  const key = process.env.REACT_APP_API_KEY;\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const id = user.id;\n  const [data, setData] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [tag, setTag] = useState([]);\n  const [url, setUrl] = useState(\"https://api.riyofirsan.com/users/findQuery?name=redux\");\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(url);\n      setTags(result.data);\n    };\n\n    fetchData();\n  }, [url]);\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      console.log(position.coords.latitude);\n      console.log(position.coords.longitude);\n      Geocode.setApiKey(`${key}`);\n      Geocode.fromLatLng(position.coords.latitude, position.coords.longitude).then(response => {\n        console.log(response.results[0].address_components[4].long_name);\n        setData({\n          lat: response.results[3].geometry.location.lat,\n          lng: response.results[3].geometry.location.lng,\n          city: response.results[0].formatted_address\n        });\n      });\n    });\n  }, []);\n  let city = data.city;\n  let lng = data.lng;\n  let lath = data.lat;\n\n  const removeTags = index => {\n    setTag([...tag.filter(tags => tag.indexOf(tags) !== index)]);\n  };\n\n  const searchTags = async query => {\n    const result = await axios(`https://api.riyofirsan.com/users/findQuery?name=${query}`);\n    setTags(result.data);\n  };\n\n  return /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      name: id,\n      description: \"\",\n      image: null,\n      namePlace: city,\n      long: lng,\n      lat: lath,\n      tag: \"\"\n    },\n    onSubmit: (values, action) => {\n      let formData = new FormData();\n      formData.set(\"name\", values.name);\n      formData.set(\"description\", values.description);\n      formData.set(\"namePlace\", city);\n      formData.set(\"long\", lng);\n      formData.set(\"lat\", lath);\n      formData.append(\"image\", values.image);\n      tag.forEach(item => {\n        formData.append(\"tag\", item._id);\n      });\n      props.add(formData);\n      action.resetForm();\n      setTag([]);\n      setTags([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, props => /*#__PURE__*/React.createElement(Form, {\n    onSubmit: props.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"tags\",\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  }, tag.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: \"tag test\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 45\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-close-icon\",\n    onClick: () => removeTags(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 45\n    }\n  }, \"x\"))))), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    id: \"description\",\n    name: \"description\",\n    rows: 6,\n    style: {\n      resize: \"none\"\n    },\n    value: props.values.description,\n    placeholder: \"Type something....\",\n    onChange: props.handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    value: props.namePlace,\n    onChange: props.handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Tag Your Friends Here\",\n    value: query,\n    onChange: event => setQuery(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn text-light  mt-2\",\n    onClick: () => searchTags(query),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, \"Search\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 33\n    }\n  }, tags.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: \"tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-custom\",\n    type: \"button\",\n    onClick: e => setTag([...tag, item]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 49\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag-close-icon\",\n    onClick: () => removeTags(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 45\n    }\n  }, \"x\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-btn-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"custom-btn \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }, \"Upload a file\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control\",\n    id: \"image\",\n    name: \"image\",\n    onChange: event => {\n      props.setFieldValue(\"image\", event.currentTarget.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn text-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 29\n    }\n  }, \"Submit\")))));\n};\n\nconst mapDispatchToProps = {\n  add: add\n};\nexport default connect(null, mapDispatchToProps)(Add);","map":{"version":3,"sources":["/home/lenovo-linux/Desktop/glints/project/final-project/eyedentity_frontend/src/components/Homepage/Add.js"],"names":["React","useState","useEffect","Formik","connect","add","Form","Geocode","axios","Add","props","Url","process","env","REACT_APP_API_URL","key","REACT_APP_API_KEY","user","JSON","parse","localStorage","getItem","id","data","setData","tags","setTags","query","setQuery","tag","setTag","url","setUrl","fetchData","result","navigator","geolocation","getCurrentPosition","position","console","log","coords","latitude","longitude","setApiKey","fromLatLng","then","response","results","address_components","long_name","lat","geometry","location","lng","city","formatted_address","lath","removeTags","index","filter","indexOf","searchTags","name","description","image","namePlace","long","values","action","formData","FormData","set","append","forEach","item","_id","resetForm","handleSubmit","cursor","map","resize","handleChange","event","target","value","e","setFieldValue","currentTarget","files","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {Formik} from \"formik\";\nimport {connect} from \"react-redux\";\nimport {add} from \"../../actioncreators/Home\";\nimport {Form} from \"react-bootstrap\";\nimport Geocode from \"react-geocode\";\nimport axios from \"axios\";\nimport \"./Add.css\";\nimport \"./tag.css\";\n\nconst Add = (props) => {\n    const Url = process.env.REACT_APP_API_URL;\n    const key = process.env.REACT_APP_API_KEY;\n\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const id = user.id;\n\n    const [data,\n        setData] = useState([]);\n    const [tags,\n        setTags] = useState([]);\n    const [query,\n        setQuery] = useState(\"\");\n\n    const [tag,\n        setTag] = useState([]);\n\n    const [url,\n        setUrl] = useState(\"https://api.riyofirsan.com/users/findQuery?name=redux\");\n\n    useEffect(() => {\n        const fetchData = async() => {\n            const result = await axios(url);\n\n            setTags(result.data);\n        };\n\n        fetchData();\n    }, [url]);\n\n    useEffect(() => {\n        navigator\n            .geolocation\n            .getCurrentPosition(function (position) {\n                console.log(position.coords.latitude);\n                console.log(position.coords.longitude);\n                Geocode.setApiKey(`${key}`);\n                Geocode\n                    .fromLatLng(position.coords.latitude, position.coords.longitude)\n                    .then((response) => {\n                        console.log(response.results[0].address_components[4].long_name);\n                        setData({lat: response.results[3].geometry.location.lat, lng: response.results[3].geometry.location.lng, city: response.results[0].formatted_address});\n                    });\n            });\n    }, []);\n\n    let city = data.city;\n    let lng = data.lng;\n    let lath = data.lat;\n\n    const removeTags = (index) => {\n        setTag([...tag.filter((tags) => tag.indexOf(tags) !== index)]);\n    };\n\n    const searchTags = async(query) => {\n        const result = await axios(`https://api.riyofirsan.com/users/findQuery?name=${query}`)\n        setTags(result.data)\n    }\n\n    return (\n        <Formik\n            initialValues={{\n            name: id,\n            description: \"\",\n            image: null,\n            namePlace: city,\n            long: lng,\n            lat: lath,\n            tag: \"\"\n        }}\n            onSubmit={(values, action) => {\n            let formData = new FormData();\n            formData.set(\"name\", values.name);\n            formData.set(\"description\", values.description);\n            formData.set(\"namePlace\", city);\n            formData.set(\"long\", lng);\n            formData.set(\"lat\", lath);\n            formData.append(\"image\", values.image);\n            tag.forEach((item) => {\n                formData.append(\"tag\", item._id);\n            });\n            props.add(formData);\n            action.resetForm();\n            setTag([]);\n            setTags([]);\n        }}>\n            {(props) => (\n                <Form onSubmit={props.handleSubmit}>\n                    <div className=\"container\">\n                        <div className=\"form-group\">\n\n                            <div className=\"tags-input\">\n                                <ul\n                                    id=\"tags\"\n                                    style={{\n                                    cursor: \"pointer\"\n                                }}>\n                                    {tag.map((item, index) => (\n                                        <li key={index} className=\"tag test\">\n                                            <span className=\"tag-title\">{item.name}</span>\n                                            <span className=\"tag-close-icon\" onClick={() => removeTags(index)}>\n                                                x\n                                            </span>\n                                        </li>\n                                    ))}\n                                </ul>\n                            </div>\n\n                            <textarea\n                                className=\"form-control\"\n                                id=\"description\"\n                                name=\"description\"\n                                rows={6}\n                                style={{\n                                resize: \"none\"\n                            }}\n                                value={props.values.description}\n                                placeholder=\"Type something....\"\n                                onChange={props.handleChange}/>\n                            <div value={props.namePlace} onChange={props.handleChange}/>\n\n                            <input\n                                type=\"text\"\n                                className=\"form-control\"\n                                placeholder=\"Tag Your Friends Here\"\n                                value={query}\n                                onChange={(event) => setQuery(event.target.value)}/>\n                            <button\n                                type=\"button\"\n                                className=\"btn text-light  mt-2\"\n                                onClick={() => searchTags(query)}>\n                                Search\n                            </button>\n\n                            <div className=\"tags-input\">\n                                <ul id=\"tags\">\n                                    {tags.map((item, index) => (\n                                        <li key={index} className=\"tag\">\n                                            <button\n                                                className=\"btn-custom\"\n                                                type=\"button\"\n                                                onClick={(e) => setTag([\n                                                ...tag,\n                                                item\n                                            ])}>\n                                                <span className=\"tag-title\">{item.name}</span>\n                                            </button>\n\n                                            <span className=\"tag-close-icon\" onClick={() => removeTags(index)}>\n                                                x\n                                            </span>\n                                        </li>\n                                    ))}\n                                </ul>\n                            </div>\n\n                            <div className=\"upload-btn-wrapper\">\n                                <button type=\"submit\" className=\"custom-btn \">\n                                    Upload a file\n                                </button>\n\n                                <input\n                                    type=\"file\"\n                                    className=\"form-control\"\n                                    id=\"image\"\n                                    name=\"image\"\n                                    onChange={(event) => {\n                                    props.setFieldValue(\"image\", event.currentTarget.files[0]);\n                                }}/>\n                            </div>\n\n                            <br/>\n                            <button type=\"submit\" className=\"btn text-light\">\n                                Submit\n                            </button>\n                        </div>\n                    </div>\n                </Form>\n            )}\n        </Formik>\n    );\n};\n\nconst mapDispatchToProps = {\n    add: add\n};\n\nexport default connect(null, mapDispatchToProps)(Add);\n"]},"metadata":{},"sourceType":"module"}